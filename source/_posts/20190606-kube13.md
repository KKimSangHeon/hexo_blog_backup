---
title: 13. 헬름
date: 2019-06-06 17:17:59
tags:
---
하나 이상의 클러스터를 운영하다 보면 같은 어플리케이션을 여러 클러스터에 배포해야 하는 경우가 발생한다.
이럴 때 배포 환경에 따라 달라지는 설정값들때문에 문제점들이 많이 발생한다.

그래서 배포 환경에 따라 달라지는 설정값만 정의해 둔 다음 이에 따라 배포하는 메커니즘이 필요했는데 이를 해결한것이 바로 헬름이다.
헬름은 쿠버네티스 차트를 관리하기 위한 도구이다. 차트는 사전 구성된 쿠버네티스 리소스의 패키지다. 즉 헬름은 패키지 관리도구이며, 차트가 리소스를 하나로 묶은 패키지에 해당한다.

1. 헬름 : 차트를 관리
2. 차트(매니패스트 템플릿으로 구성) : 차트를 사용하여 매니페스트 파일 생성
3. 매니페스트 파일 : 매니페스트 파일에 기초한 쿠버네티스 리소스 관리
4. 쿠버네티스

헬름으로 차트를 관리하는 목적은 번잡해지기 쉬운 매니페스트 파일을 관리하기 쉽게하기 위한것이다. 헬름은 단순한 패키지 관리자가 아니라, 차트를 중심으로 하는 쿠버네티스 개발 업무의 종합 관리도구이다.

실무에서는 여러 환경에 배포해야 하는 어플리케이션은 모두 차트로 패키징해 kubectl 대신 헬름으로 배포 및 없데이트를 수행한다.

### 헬름 설치
```
$ curl -LO https://git.io/get_helm.sh
$ chmod 700 get_helm.sh
$ ./get_helm.sh
```

헬름 초기화
틸러라는 서버 어플리케이션이 kube-system 네임스페이스에 배포된다. 틸러는 helm 명령에따라 설치 등의 작업을 담당한다.

```
$ helm init
```
잘 만들어졌나 확인해보자
```
$ kubectl -n kube-system get service,deployment,pod --selector app=helm
```
버전을 확인해보자.
```
$ helm version
```
여러 클러스터를 다룰 때는 클라이언트/서버의 버전을 일치시키는것이 좋다. 이를 위해 다음을 입력하여 업그레이드하자.
```
$ helm init --upgrade
```
