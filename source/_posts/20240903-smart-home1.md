---
title: 1. 스마트홈 구성 입문 - 필립스 휴, 스마트싱스 활용
date: 2024-09-03 19:31:37
tags:
---



### 스마트 홈 구성
필립스 휴 조명을 구매하고, 이를 시리를 통한 호출 또는 자동화를 위해선 필립스 휴 브릿지가 필요하는 사실을 늦게 깨달았다.
필립스 휴 조명을 더 살 생각은 없었기에 휴 브릿지를 사기엔 애매했고, 스마트싱스 스테이션이 휴 조명과 연동된다는 사실을 알게되었다.

아래와 같은 플로우면 시리를 통해 휴 조명을 제어할 수 있지 않을까 생각해봤고 가능하겠다는 판단하에 스마트싱스 스테이션을 추가 구매하였다.
`시리 - 아이폰 단축어 - http request - 스마트싱스서버 - 스마트싱스 스테이션 - 휴 조명 `


### 준비물
필립스 휴 , 스마트싱스 스테이션

### 과정
`1.스마트싱스 스테이션, 필립스 휴 연동`
스마트싱스 스테이션 앱을 설치 후 스마트싱스 스테이션을 연동한다. 이후 필립스 스마트싱스 앱에서 주변검색 후 필립스 휴 연동

`2.스마트싱스 토큰발급`
https://account.smartthings.com/tokens 로그인 후 새 토큰을 발급받는다. 권한은 장치 > 모든 디바이스 표시, 모든 디바이스 보기, 모든 디바이스 제어로 선택

`3.디바이스 제어를 위한 capa 정보 조회`
https://blackdeery.github.io/st_helper/ 에 접속 후 위에서 발급한 토큰 입력 후 capa정보 습득 


`4.제어 api 호출테스트`


전원제어
```
https://api.smartthings.com/v1/devices/{{HUE_LIGHT_ID}}/commands
--header 'Authorization: Bearer {{SMART_THINGS_TOKEN}}' \
--header 'Content-Type: application/json'
{
    "commands": [
        {
            "component": "main",
            "capability": "switch",
            "command": "on"
        }
    ]
}
```



밝기제어
```
https://api.smartthings.com/v1/devices/{{HUE_LIGHT_ID}}/commands
--header 'Authorization: Bearer {{SMART_THINGS_TOKEN}}' \
--header 'Content-Type: application/json'
{
    "commands": [
        {
            "component": "main",
            "capability": "switchLevel",
            "command": "setLevel",
            "arguments": [
                100
            ]
        }
    ]
}
```

`5.시리를 통한 제어 api 호출테스트`
단축어에 http 리퀘스트를 등록하고 제목을 '불켜' 와 같이 등록한다.


`6.홈 앱을 사용해보고싶다..`
홈앱을 사용하기 위해선 HomePod 또는 Apple TV가 필요하다고 한다. 
하지만 홈브릿지라는걸 설치하면 위 두개 없이 연동이 가능하다 하여 남는 노트북에 VirtualBox로 설치하고 홈 앱과 연동까지 완료하였다.
이후 홈브릿지에 스마트싱스 플러그인을 설치하여 홈 앱에서 스마트싱스에 연동된 필립스 휴를 잘 갖고오고 있는것을 확인했고 제어까지 잘 되는것을 확인하였다.

`조금 더 뭔가 복합적인 자동화를 생성하고 싶다. 홈 앱은 뭔가 부족한느낌. `
아이패드로 홈 앱을 띄워 월패드처럼 사용하고, 아이폰과 홈 앱을 공유하여 사용하고자 했으나 너무 오래된 아이패드인지 홈 앱이 내 아이폰과 연동이 불가능했다.

홈 앱을 버리고, 홈 어시스턴트를 사용하여 웹으로 제어를 해보자 (홈어시스턴트 앱이 있는데 설치 불가. 워낙구형이라,..)




홈 어시스턴스

